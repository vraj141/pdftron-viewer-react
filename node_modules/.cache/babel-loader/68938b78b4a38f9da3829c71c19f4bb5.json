{"ast":null,"code":"/*!\n * strip-dirs | MIT (c) Shinnosuke Watanabe\n * https://github.com/shinnn/node-strip-dirs\n*/\n'use strict';\n\nvar path = require('path');\n\nvar util = require('util');\n\nvar isNaturalNumber = require('is-natural-number');\n\nmodule.exports = function stripDirs(pathStr, count, option) {\n  if (typeof pathStr !== 'string') {\n    throw new TypeError(util.inspect(pathStr) + ' is not a string. First argument to strip-dirs must be a path string.');\n  }\n\n  if (path.posix.isAbsolute(pathStr) || path.win32.isAbsolute(pathStr)) {\n    throw new Error(\"\".concat(pathStr, \" is an absolute path. strip-dirs requires a relative path.\"));\n  }\n\n  if (!isNaturalNumber(count, {\n    includeZero: true\n  })) {\n    throw new Error('The Second argument of strip-dirs must be a natural number or 0, but received ' + util.inspect(count) + '.');\n  }\n\n  if (option) {\n    if (typeof option !== 'object') {\n      throw new TypeError(util.inspect(option) + ' is not an object. Expected an object with a boolean `disallowOverflow` property.');\n    }\n\n    if (Array.isArray(option)) {\n      throw new TypeError(util.inspect(option) + ' is an array. Expected an object with a boolean `disallowOverflow` property.');\n    }\n\n    if ('disallowOverflow' in option && typeof option.disallowOverflow !== 'boolean') {\n      throw new TypeError(util.inspect(option.disallowOverflow) + ' is neither true nor false. `disallowOverflow` option must be a Boolean value.');\n    }\n  } else {\n    option = {\n      disallowOverflow: false\n    };\n  }\n\n  var pathComponents = path.normalize(pathStr).split(path.sep);\n\n  if (pathComponents.length > 1 && pathComponents[0] === '.') {\n    pathComponents.shift();\n  }\n\n  if (count > pathComponents.length - 1) {\n    if (option.disallowOverflow) {\n      throw new RangeError('Cannot strip more directories than there are.');\n    }\n\n    count = pathComponents.length - 1;\n  }\n\n  return path.join.apply(null, pathComponents.slice(count));\n};","map":null,"metadata":{},"sourceType":"script"}