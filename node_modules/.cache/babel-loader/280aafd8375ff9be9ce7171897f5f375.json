{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\vrajs\\\\Desktop\\\\CHANGES TO BE INTEGRATED\\\\firebase-file-upload-pdftron-reactjs\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\vrajs\\\\Desktop\\\\CHANGES TO BE INTEGRATED\\\\firebase-file-upload-pdftron-reactjs\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\vrajs\\\\Desktop\\\\CHANGES TO BE INTEGRATED\\\\firebase-file-upload-pdftron-reactjs\\\\src\\\\index.js\";\n\n// import React,{useState} from 'react'; \nimport { storage } from \"./firebase\";\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport React, { useRef, useEffect } from 'react';\nimport WebViewer from '@pdftron/webviewer'; // import './App.css';\n\nimport App from './App';\nit('renders without crashing', function () {\n  var div = document.createElement('div');\n  ReactDOM.render( /*#__PURE__*/React.createElement(App, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 19\n    }\n  }), div);\n  ReactDOM.unmountComponentAtNode(div);\n});\n\nvar PdfApp = function PdfApp() {\n  var viewer = useRef(null);\n  useEffect(function () {\n    WebViewer({\n      path: '/webviewer/lib',\n      initialDoc: 'https://www.eurofound.europa.eu/sites/default/files/ef_publication/field_ef_document/ef1710en.pdf'\n    }, viewer.current).then(function (instance) {\n      instance.setTheme('light');\n      var docViewer = instance.docViewer,\n          Annotations = instance.Annotations,\n          CoreControls = instance.CoreControls;\n      var annotManager = docViewer.getAnnotationManager(); /////////////////////////////////////////\n      // Added download button in header\n\n      instance.setHeaderItems(function (header) {\n        header.push({\n          type: 'actionButton',\n          img: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"/></svg>',\n          title: 'download',\n          onClick: function () {\n            var _onClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              var xfdfString, saveOptions, options;\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return annotManager.exportAnnotations();\n\n                    case 2:\n                      xfdfString = _context.sent;\n                      saveOptions = CoreControls.SaveOptions;\n                      options = {\n                        filename: 'myDocument.pdf',\n                        xfdfString: xfdfString,\n                        flags: saveOptions.LINEARIZED,\n                        downloadType: 'pdf'\n                      };\n                      instance.downloadPdf(options);\n\n                    case 6:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n\n            function onClick() {\n              return _onClick.apply(this, arguments);\n            }\n\n            return onClick;\n          }()\n        });\n      }); ///disabled unuseful elements in tool bar\n\n      instance.disableElements(['zoomInButton', 'zoomOutButton', 'zoomOverlayButton', 'startFormEditingToolGroupButton', 'cropToolGroupButton', 'printButton', 'eraserToolButton', 'themeChangeButton', 'fullscreenButton', 'eraserToolButton', 'redoButton', 'undoButton', 'calloutToolGroupButton', 'fileAttachmentToolGroupButton', 'fileAttachmentToolGroupButton', 'stampToolGroupButton', 'rubberStampToolGroupButton', 'leftPanelButton', 'viewControlsButton', 'zoomOverlay', 'panToolButton', 'textSelectButton', 'selectToolButton', 'searchButton', 'toggleNotesButton', 'toolbarGroup-Annotate', 'toolbarGroup-Shapes', 'toolbarGroup-Edit', 'toolbarGroup-Annotate', 'menuButton']); //added save button in header toolbar\n\n      instance.setHeaderItems(function (header) {\n        header.push({\n          type: 'actionButton',\n          img: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"/></svg>',\n          title: 'save button',\n          onClick: function () {\n            var _onClick2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n              var doc, xfdfString, data, arr, blob, fileRef;\n              return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      _context2.t0 = console;\n                      _context2.next = 3;\n                      return annotManager.exportAnnotations({\n                        links: false,\n                        widgets: false\n                      });\n\n                    case 3:\n                      _context2.t1 = _context2.sent;\n\n                      _context2.t0.log.call(_context2.t0, _context2.t1);\n\n                      // save the annotations\n                      //////////////\n                      doc = docViewer.getDocument();\n                      _context2.next = 8;\n                      return annotManager.exportAnnotations();\n\n                    case 8:\n                      xfdfString = _context2.sent;\n                      _context2.next = 11;\n                      return doc.getFileData({\n                        xfdfString: xfdfString\n                      });\n\n                    case 11:\n                      data = _context2.sent;\n                      arr = new Uint8Array(data);\n                      blob = new Blob([arr], {\n                        type: 'application/pdf'\n                      });\n                      fileRef = storage.ref().child('https://www.eurofound.europa.eu/sites/default/files/ef_publication/field_ef_document/ef1710en.pdf');\n                      fileRef.put(blob);\n\n                    case 16:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, _callee2);\n            }));\n\n            function onClick() {\n              return _onClick2.apply(this, arguments);\n            }\n\n            return onClick;\n          }()\n        });\n      });\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"webviewer\",\n    ref: viewer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  })));\n};\n\nReactDOM.render( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PdfApp, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 19\n  }\n})), document.getElementById('root'));","map":{"version":3,"sources":["C:/Users/vrajs/Desktop/CHANGES TO BE INTEGRATED/firebase-file-upload-pdftron-reactjs/src/index.js"],"names":["storage","ReactDOM","React","useRef","useEffect","WebViewer","App","it","div","document","createElement","render","unmountComponentAtNode","PdfApp","viewer","path","initialDoc","current","then","instance","setTheme","docViewer","Annotations","CoreControls","annotManager","getAnnotationManager","setHeaderItems","header","push","type","img","title","onClick","exportAnnotations","xfdfString","saveOptions","SaveOptions","options","filename","flags","LINEARIZED","downloadType","downloadPdf","disableElements","console","links","widgets","log","doc","getDocument","getFileData","data","arr","Uint8Array","blob","Blob","fileRef","ref","child","put","getElementById"],"mappings":"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","sourcesContent":["// import React,{useState} from 'react'; \nimport {storage} from \"./firebase\";\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nimport React, { useRef, useEffect} from 'react';\nimport WebViewer from '@pdftron/webviewer';\n// import './App.css';\nimport App from './App';\n\nit('renders without crashing', () => {\n  const div = document.createElement('div');\n  ReactDOM.render(<App />, div);\n  ReactDOM.unmountComponentAtNode(div);\n});\n\n\n \nconst PdfApp =()=>{\n\n  const viewer = useRef(null);\n  useEffect(() => {\n    \n    WebViewer(\n      {\n        path: '/webviewer/lib',\n        initialDoc: 'https://www.eurofound.europa.eu/sites/default/files/ef_publication/field_ef_document/ef1710en.pdf',\n      },  \n      viewer.current,\n    ).then((instance) => {\n      instance.setTheme('light');\n      const { docViewer, Annotations ,   CoreControls} = instance;\n      const annotManager = docViewer.getAnnotationManager();\n      /////////////////////////////////////////\n\n        // Added download button in header\n  instance.setHeaderItems(header => {\n    header.push({\n        type: 'actionButton',\n        img: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"/></svg>',\n        title: 'download',\n        onClick: async () => {\n          const xfdfString = await annotManager.exportAnnotations();\n          const saveOptions = CoreControls.SaveOptions;\n          const options = {\n            filename: 'myDocument.pdf',\n            xfdfString,\n            flags: saveOptions.LINEARIZED,\n            downloadType: 'pdf'\n          };\n          \n          instance.downloadPdf(options);\n        }\n    });\n  });\n\n    ///disabled unuseful elements in tool bar\ninstance.disableElements(['zoomInButton','zoomOutButton','zoomOverlayButton','startFormEditingToolGroupButton','cropToolGroupButton','printButton','eraserToolButton','themeChangeButton','fullscreenButton','eraserToolButton','redoButton','undoButton','calloutToolGroupButton','fileAttachmentToolGroupButton','fileAttachmentToolGroupButton','stampToolGroupButton','rubberStampToolGroupButton','leftPanelButton','viewControlsButton','zoomOverlay','panToolButton','textSelectButton','selectToolButton','searchButton','toggleNotesButton','toolbarGroup-Annotate','toolbarGroup-Shapes','toolbarGroup-Edit','toolbarGroup-Annotate','menuButton']);\n   //added save button in header toolbar\n  \n       instance.setHeaderItems(header => {\n        header.push({\n          \n          type: 'actionButton',\n          img: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"/></svg>',\n          title: 'save button',\n          onClick: async() => {\n            console.log(await annotManager.exportAnnotations({ links: false, widgets: false }));\n            // save the annotations\n            //////////////\n            const doc = docViewer.getDocument();\n          const xfdfString = await annotManager.exportAnnotations();\n          \n          const data = await doc.getFileData({ xfdfString});\n          const arr = new Uint8Array(data);\n          const blob = new Blob([arr], { type: 'application/pdf' });\n          let fileRef = storage.ref().child('https://www.eurofound.europa.eu/sites/default/files/ef_publication/field_ef_document/ef1710en.pdf' );\n          fileRef.put(blob);\n          \n\n          }\n        });\n      });\n\n\n    });\n  }, []);\n \n \n  return(\n      <>\n    \n    <div className=\"App\">\n      \n      <div className=\"webviewer\" ref={viewer}></div>\n    </div>\n       \n     \n    \n     </>\n  );\n};\n \nReactDOM.render(<><PdfApp/></>, document.getElementById('root'));"]},"metadata":{},"sourceType":"module"}