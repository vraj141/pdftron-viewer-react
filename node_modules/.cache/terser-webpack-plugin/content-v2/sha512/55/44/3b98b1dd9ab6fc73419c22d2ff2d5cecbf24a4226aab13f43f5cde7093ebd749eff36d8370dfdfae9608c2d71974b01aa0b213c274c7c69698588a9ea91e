{"map":"{\"version\":3,\"sources\":[\"C:/Users/vrajs/Desktop/firebase-file-upload-pdftron-reactjs/src/firebase/index.js\",\"C:/Users/vrajs/Desktop/firebase-file-upload-pdftron-reactjs/src/App.js\",\"C:/Users/vrajs/Desktop/firebase-file-upload-pdftron-reactjs/src/index.js\"],\"names\":[\"firebase\",\"initializeApp\",\"apiKey\",\"authDomain\",\"projectId\",\"storageBucket\",\"messagingSenderId\",\"appId\",\"storage\",\"App\",\"props\",\"viewer\",\"useRef\",\"useEffect\",\"WebViewer\",\"path\",\"initialDoc\",\"pdfUrl\",\"current\",\"then\",\"instance\",\"setTheme\",\"docViewer\",\"Annotations\",\"annotManager\",\"CoreControls\",\"getAnnotationManager\",\"setHeaderItems\",\"header\",\"push\",\"type\",\"img\",\"onClick\",\"_onClick\",\"Object\",\"asyncToGenerator\",\"regenerator_default\",\"a\",\"mark\",\"_callee\",\"doc\",\"xfdfString\",\"data\",\"arr\",\"blob\",\"wrap\",\"_context\",\"prev\",\"next\",\"t0\",\"console\",\"exportAnnotations\",\"links\",\"widgets\",\"t1\",\"sent\",\"log\",\"call\",\"getDocument\",\"getFileData\",\"Uint8Array\",\"Blob\",\"ref\",\"child\",\"put\",\"stop\",\"apply\",\"this\",\"arguments\",\"on\",\"_callee2\",\"rectangleAnnot\",\"_context2\",\"RectangleAnnotation\",\"PageNumber\",\"X\",\"Y\",\"Width\",\"Height\",\"Author\",\"getCurrentUser\",\"addAnnotation\",\"redrawAnnotation\",\"react_default\",\"createElement\",\"className\",\"ReactFirebaseFileUpload\",\"_useState\",\"useState\",\"_useState2\",\"slicedToArray\",\"image\",\"setImage\",\"_useState3\",\"_useState4\",\"url\",\"setUrl\",\"_useState5\",\"_useState6\",\"progress\",\"setProgress\",\"Fragment\",\"value\",\"max\",\"onChange\",\"e\",\"target\",\"files\",\"concat\",\"name\",\"snapshot\",\"Math\",\"round\",\"bytesTransferred\",\"totalBytes\",\"error\",\"getDownloadURL\",\"id\",\"src\",\"alt\",\"src_App_0\",\"ReactDOM\",\"render\",\"src_ReactFirebaseFileUpload\",\"document\",\"getElementById\"],\"mappings\":\"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\",\"sourcesContent\":[\"import firebase from \\\"firebase/app\\\";\\r\\nimport \\\"firebase/storage\\\"\\r\\n\\r\\n \\r\\nconst firebaseConfig = {\\r\\n    apiKey: \\\"AIzaSyDVjvdgk4hBrRyO-tXlT3OicqqpM-dCNQo\\\",\\r\\n    authDomain: \\\"fir-react-upload-472ad.firebaseapp.com\\\",\\r\\n    projectId: \\\"fir-react-upload-472ad\\\",\\r\\n    storageBucket: \\\"fir-react-upload-472ad.appspot.com\\\",\\r\\n    messagingSenderId: \\\"1038885452377\\\",\\r\\n    appId: \\\"1:1038885452377:web:04f796878203e084b0cf48\\\"\\r\\n  };\\r\\n\\r\\n  firebase.initializeApp(firebaseConfig);\\r\\n \\r\\n  const storage = firebase.storage();\\r\\n  export{storage,firebase as default};\",\"import React, { useRef, useEffect} from 'react';\\nimport WebViewer from '@pdftron/webviewer';\\nimport './App.css';\\nimport { storage } from './firebase';\\n \\n\\n\\n\\nconst App = (props) => {\\n  const viewer = useRef(null);\\n \\n   \\n  ///////////////////////////////////////////////////////////////////////////\\n    useEffect(() => {\\n      WebViewer(\\n        {\\n          path: '/webviewer/lib',\\n          initialDoc: props.pdfUrl,\\n        },  \\n        viewer.current,\\n      ).then((instance) => {\\n        instance.setTheme('dark');\\n        const { docViewer, Annotations ,   CoreControls} = instance;\\n        const annotManager = docViewer.getAnnotationManager();\\n\\n       \\n        \\n    \\n\\n         ///////////////////////////////////////////////////\\n         ///save button header\\n         instance.setHeaderItems(header => {\\n          header.push({\\n            type: 'actionButton',\\n            img: '<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M0 0h24v24H0z\\\" fill=\\\"none\\\"/><path d=\\\"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\\\"/></svg>',\\n            onClick: async() => {\\n              console.log(await annotManager.exportAnnotations({ links: false, widgets: false }));\\n              // save the annotations\\n              //////////////\\n              const doc = docViewer.getDocument();\\n            const xfdfString = await annotManager.exportAnnotations();\\n            \\n            const data = await doc.getFileData({ xfdfString});\\n            const arr = new Uint8Array(data);\\n            const blob = new Blob([arr], { type: 'application/pdf' });\\n            let fileRef = storage.ref().child(props.pdfUrl);\\n            fileRef.put(blob);\\n            \\n\\n            ////////////\\n\\n\\n            // annotManager.exportAnnotations({ links: false, widgets: false }).then(xfdfString => {\\n            //   fetch(props.pdfUrl, {\\n            //     method: 'POST',\\n            //     body: props.pdfUrl // written into an XFDF file in server\\n                 \\n            //   });\\n            //   // Full samples are available at the end of this section.\\n            // })\\n\\n            }\\n          });\\n        });\\n\\n\\n\\n         //////////////////////////\\n\\n  \\n        docViewer.on('documentLoaded',async  () => {\\n          const doc = docViewer.getDocument();\\n     \\n  \\n          const rectangleAnnot = new Annotations.RectangleAnnotation();\\n          rectangleAnnot.PageNumber = 1;\\n          // values are in page coordinates with (0, 0) in the top left\\n          rectangleAnnot.X = 50;\\n          rectangleAnnot.Y = 50;\\n          rectangleAnnot.Width = 100;\\n          rectangleAnnot.Height = 50;\\n          rectangleAnnot.Author = annotManager.getCurrentUser();\\n          \\n  \\n          annotManager.addAnnotation(rectangleAnnot);\\n          // need to draw the annotation otherwise it won't show up until the page is refreshed\\n          annotManager.redrawAnnotation(rectangleAnnot);\\n\\n       \\n        });\\n      });\\n    }, []);\\n   \\n\\n  return (\\n    <div className=\\\"App\\\">\\n      <div className=\\\"header\\\">React sample</div>\\n\\n      <div className=\\\"webviewer\\\" ref={viewer}></div>\\n    </div>\\n  );\\n};\\n\\nexport default App;\\n\",\"import React,{useState} from 'react'; \\nimport {storage} from \\\"./firebase\\\";\\nimport ReactDOM from 'react-dom';\\nimport './index.css';\\nimport App from './App';\\n \\n \\n\\n \\n \\n \\n \\nconst ReactFirebaseFileUpload =()=>{\\n  const [image,setImage] = useState(null);\\n  \\n  const [url,setUrl]=useState(null);\\n  const [progress,setProgress] = useState(0);\\n\\nconst handleChange = e =>{\\n  if(e.target.files[0]){\\n    setImage(e.target.files[0]);\\n\\n  }\\n};\\n\\nconst handleUpload = ()=>{\\n  const uploadTask = storage.ref(`images/${image.name}`).put(image);\\n  uploadTask.on(\\n    \\\"state_changed\\\",\\n    snapshot =>{\\n      const progress = Math.round((snapshot.bytesTransferred/snapshot.totalBytes)*100);\\n      setProgress(progress);\\n    },\\n    error=> {\\n      console.log(error);\\n    },\\n    ()=>{\\n      storage\\n      .ref(\\\"images\\\")\\n      .child(image.name)\\n      .getDownloadURL()\\n      .then(url =>{\\n        setUrl(url);\\n      });\\n    }\\n    );\\n};\\nconsole.log(\\\"image: \\\",image);\\n \\n  return(\\n      <>\\n    <div>\\n   \\n    <progress value={progress} max=\\\"100\\\"/>\\n    <br/>\\n    <br/>\\n     \\n      welcome to use of firebase,react and its pdftron library\\n      <br/>\\n       \\n      <input type=\\\"file\\\" onChange={handleChange}/>\\n      <button onClick={handleUpload}>upload</button>\\n      <br/>\\n      {url}\\n      <br/>\\n      <br/>\\n      <button id=\\\"save\\\">Save File</button>\\n      <br/>\\n      <iframe src={url || \\\"http://via.placeholder.com/300*400\\\"} alt=\\\"firbase-file\\\"/>\\n    </div>\\n    {\\n        url && \\n        <App pdfUrl={url}/>\\n    }\\n     </>\\n  );\\n};\\n \\nReactDOM.render(<><ReactFirebaseFileUpload/></>, document.getElementById('root'));\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(24)},18:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){\"use strict\";n.r(t);var a=n(6),r=n(0),c=n.n(r),o=n(5);n(25);o.a.initializeApp({apiKey:\"AIzaSyDVjvdgk4hBrRyO-tXlT3OicqqpM-dCNQo\",authDomain:\"fir-react-upload-472ad.firebaseapp.com\",projectId:\"fir-react-upload-472ad\",storageBucket:\"fir-react-upload-472ad.appspot.com\",messagingSenderId:\"1038885452377\",appId:\"1:1038885452377:web:04f796878203e084b0cf48\"});var l=o.a.storage(),i=n(10),u=n.n(i),s=(n(18),n(4)),p=n.n(s),d=n(7),f=n(11),m=n.n(f),g=(n(22),function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)(function(){m()({path:\"/webviewer/lib\",initialDoc:e.pdfUrl},t.current).then(function(t){t.setTheme(\"dark\");var n=t.docViewer,a=t.Annotations,r=(t.CoreControls,n.getAnnotationManager());t.setHeaderItems(function(t){t.push({type:\"actionButton\",img:'<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"/></svg>',onClick:function(){var t=Object(d.a)(p.a.mark(function t(){var a,c,o,i,u;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=console,t.next=3,r.exportAnnotations({links:!1,widgets:!1});case 3:return t.t1=t.sent,t.t0.log.call(t.t0,t.t1),a=n.getDocument(),t.next=8,r.exportAnnotations();case 8:return c=t.sent,t.next=11,a.getFileData({xfdfString:c});case 11:o=t.sent,i=new Uint8Array(o),u=new Blob([i],{type:\"application/pdf\"}),l.ref().child(e.pdfUrl).put(u);case 16:case\"end\":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()})}),n.on(\"documentLoaded\",Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.getDocument(),(t=new a.RectangleAnnotation).PageNumber=1,t.X=50,t.Y=50,t.Width=100,t.Height=50,t.Author=r.getCurrentUser(),r.addAnnotation(t),r.redrawAnnotation(t);case 10:case\"end\":return e.stop()}},e)})))})},[]),c.a.createElement(\"div\",{className:\"App\"},c.a.createElement(\"div\",{className:\"header\"},\"React sample\"),c.a.createElement(\"div\",{className:\"webviewer\",ref:t}))}),b=function(){var e=Object(r.useState)(null),t=Object(a.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(null),u=Object(a.a)(i,2),s=u[0],p=u[1],d=Object(r.useState)(0),f=Object(a.a)(d,2),m=f[0],b=f[1];return console.log(\"image: \",n),c.a.createElement(c.a.Fragment,null,c.a.createElement(\"div\",null,c.a.createElement(\"progress\",{value:m,max:\"100\"}),c.a.createElement(\"br\",null),c.a.createElement(\"br\",null),\"welcome to use of firebase,react and its pdftron library\",c.a.createElement(\"br\",null),c.a.createElement(\"input\",{type:\"file\",onChange:function(e){e.target.files[0]&&o(e.target.files[0])}}),c.a.createElement(\"button\",{onClick:function(){l.ref(\"images/\".concat(n.name)).put(n).on(\"state_changed\",function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);b(t)},function(e){console.log(e)},function(){l.ref(\"images\").child(n.name).getDownloadURL().then(function(e){p(e)})})}},\"upload\"),c.a.createElement(\"br\",null),s,c.a.createElement(\"br\",null),c.a.createElement(\"br\",null),c.a.createElement(\"button\",{id:\"save\"},\"Save File\"),c.a.createElement(\"br\",null),c.a.createElement(\"iframe\",{src:s||\"http://via.placeholder.com/300*400\",alt:\"firbase-file\"})),s&&c.a.createElement(g,{pdfUrl:s}))};u.a.render(c.a.createElement(c.a.Fragment,null,c.a.createElement(b,null)),document.getElementById(\"root\"))}},[[12,2,1]]]);","extractedComments":[]}