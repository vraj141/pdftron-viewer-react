!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TestResolvers=t():e.TestResolvers=t()}(global,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function i(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return a},a=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,s=e.length;r<n;r++,s++)e[s]=t[r];return e},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolverTests=t.writeTestResolversDataToDB=t.generateTestResolversData=t.assert=t.compareResult=t.resetErrorMessages=t.errorMessages=void 0;var u=r(3),c=r(4),l=i(r(5));t.errorMessages=[];t.resetErrorMessages=function(){return t.errorMessages.length=0};t.compareResult=function(e,r,n,s){var o=JSON.stringify(e),a=JSON.stringify(r),i=Object.prototype.toString.call(e),u=Object.prototype.toString.call(r);if(i!==u)return t.errorMessages.push({resolver:n,queryParams:JSON.stringify(s),error:{type:"data_type_invalid",expected:o,received:a,message:"Expected returned type of "+n+" to be "+i+", received "+u+"."}}),!1;if(["[object Array]","[object Object]"].indexOf(i)<0)return t.errorMessages.push({resolver:n,queryParams:JSON.stringify(s),error:{type:"data_type_invalid",expected:o,received:a,message:"Expected returned type to be either '[object Array]' or '[object Object]'."}}),!1;var c="[object Array]"===i?e.length:Object.keys(e).length,l="[object Array]"===i?r.length:Object.keys(r).length;if(c!==l)return t.errorMessages.push({resolver:n,queryParams:JSON.stringify(s),error:{type:"data_missing",expected:o,received:a,message:"[object Array]"===i?"Expected to receive "+c+" "+n.split(".")[1]+", received "+l+".":"Expected "+n.split(".")[1]+" to have length "+c+", received "+l}}),!1;var d=function(e,r,o){var a=Object.prototype.toString.call(e);if(["[object Array]","[object Object]"].indexOf(a)>=0){if(!t.compareResult(e,r,n,s))return!1}else{var i=Object.prototype.toString.call(r);if(a!==i)return t.errorMessages.push({resolver:n,queryParams:JSON.stringify(s),error:{type:"data_type_invalid",property:o,expected:e,received:r,message:"Expected "+n.split(".")[1]+"."+o+" type to be "+a+", received "+i}}),!1;if("[object Function]"===a){if(e.toString()!==r.toString())return!1}else if(e!==r)return t.errorMessages.push({resolver:n,queryParams:JSON.stringify(s),error:{type:"data_invalid",property:o,expected:e,received:r,message:"Expected "+n.split(".")[1]+"."+o+" type to be "+JSON.stringify(e)+", received "+JSON.stringify(r)}}),!1}};if("[object Array]"===i)for(var f=function(i){var u=e[i].id;if(!u)return t.errorMessages.push({resolver:n,queryParams:JSON.stringify(s),error:{type:"data_missing",expected:o,received:a,message:"Expected to have id in "+JSON.stringify(e[i])+", but not found."}}),{value:!1};var c=r.findIndex((function(e){return e.id===u}));return c<0?(t.errorMessages.push({resolver:n,queryParams:JSON.stringify(s),error:{type:"data_missing",expected:o,received:a,message:"Expected to receive "+JSON.stringify(e[i])+", but not found."}}),{value:!1}):!1===d(e[i],r[c])?{value:!1}:void 0},p=0;p<c;p++){var m=f(p);if("object"==typeof m)return m.value}else for(var v in e)if(Object.prototype.hasOwnProperty.call(e,v)&&!1===d(e[v],r[v],v))return!1;return!0};t.assert=function(e,r,n,s){var o=JSON.stringify(e),a=JSON.stringify(r);if(o!==a){var i={resolver:n,queryParams:JSON.stringify(s),error:{type:"data_invalid",expected:a,received:o,message:"Expected returned value of "+n+" to be "+a+", received "+o+"."}};t.errorMessages.push(i)}};t.generateTestResolversData=function(){return n(void 0,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return'<?xml version="1.0" encoding="UTF-8" ?><xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve"><fields /><add><square xmlns="http://ns.adobe.com/xfdf/" page="0" rect="156.66,561.42,286.03,698.71" color="#E44234" flags="print" name="b7cc5328-60bd-47af-bb3b-18d2b8e28bfd" title="test" subject="Rectangle" date="D:20201105141527-08\'00\'" creationdate="D:20201105141527-08\'00\'"/></add><modify /><delete /></xfdf>',[4,(e=new l.default({xfdfString:'<?xml version="1.0" encoding="UTF-8" ?><xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve"><fields /><add><square xmlns="http://ns.adobe.com/xfdf/" page="0" rect="156.66,561.42,286.03,698.71" color="#E44234" flags="print" name="b7cc5328-60bd-47af-bb3b-18d2b8e28bfd" title="test" subject="Rectangle" date="D:20201105141527-08\'00\'" creationdate="D:20201105141527-08\'00\'"/></add><modify /><delete /></xfdf>'})).createUser(10)];case 1:return t.sent(),[4,e.createDocumentForAllUser(5)];case 2:return t.sent(),[4,Promise.all(e.data.users.map((function(t,r){return n(void 0,void 0,void 0,(function(){return s(this,(function(o){switch(o.label){case 0:return[4,Promise.all(e.data.documents.map((function(o,a){return n(void 0,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return r%2!=a%2?[3,3]:[4,e.createDocumentMember(t.id,o.id)];case 1:return n.sent(),[4,e.createAnnotation(1,o.id,t.id)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))})))];case 1:return o.sent(),[2]}}))}))})))];case 3:return t.sent(),console.log("Generated test resolvers data."),[2,e.data]}}))}))};t.writeTestResolversDataToDB=function(e,t){return n(void 0,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,7,,8]),[4,Promise.all(e.users.map((function(e){return n(void 0,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,t.Mutation.addUser(e)];case 1:return r.sent(),[2]}}))}))})))];case 1:return o.sent(),[4,Promise.all(e.documents.map((function(e){return n(void 0,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,t.Mutation.addDocument(e)];case 1:return r.sent(),[2]}}))}))})))];case 2:return o.sent(),[4,Promise.all(e.annotations.map((function(e){return n(void 0,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,t.Mutation.addAnnotation(e)];case 1:return r.sent(),[2]}}))}))})))];case 3:return o.sent(),[4,Promise.all(e.documentMembers.map((function(e){return n(void 0,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,t.Mutation.addDocumentMember(e)];case 1:return r.sent(),[2]}}))}))})))];case 4:return o.sent(),[4,Promise.all(e.annotationMembers.map((function(e){return n(void 0,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,t.Mutation.addAnnotationMember(e)];case 1:return r.sent(),[2]}}))}))})))];case 5:return o.sent(),[4,Promise.all(e.mentions.map((function(e){return n(void 0,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,t.Mutation.addMention(e)];case 1:return r.sent(),[2]}}))}))})))];case 6:return o.sent(),console.log("Wrote all test resolver data to DB."),[3,8];case 7:return r=o.sent(),console.error(r.messages),[3,8];case 8:return[2]}}))}))};t.resolverTests=function(e,r){return n(void 0,void 0,void 0,(function(){var i,l,d;return s(this,(function(f){switch(f.label){case 0:return i=u.getQueryTests(e),l=c.getMutationTests(e),d=a(a([],o(i)),o(l)),[4,function(){return n(void 0,void 0,void 0,(function(){var e,a;return s(this,(function(i){switch(i.label){case 0:e=function(e){var a,i;return s(this,(function(u){switch(u.label){case 0:return a=d[e],i=a.calls.map((function(e){return n(void 0,void 0,void 0,(function(){var n,i,u,c,l,d,f,p;return s(this,(function(s){switch(s.label){case 0:return n=o(a.resolver.split("."),2),i=n[0],u=n[1],void 0!==r[i][u]?[3,1]:(c={resolver:a.resolver,error:{type:"resolver_missing",message:a.resolver+" resolver is missing."}},t.errorMessages.push(c),[3,6]);case 1:return l=null,Array.isArray(e.params)&&2===e.params.length?(d=o(e.params,2),f=d[0],p=d[1],[4,r[i][u](f,p)]):[3,3];case 2:return l=s.sent(),[3,5];case 3:return[4,r[i][u](e.params)];case 4:l=s.sent(),s.label=5;case 5:void 0===l?t.errorMessages.push({resolver:a.resolver,queryParams:e.params,error:{type:"data_invalid",message:a.resolver+" has no return value."}}):e.ensureNotNull&&null===l?t.errorMessages.push({resolver:a.resolver,queryParams:e.params,error:{type:"data_invalid",message:a.resolver+" should not return null."}}):e.skipTest||e.test(l,a.resolver,e.params),s.label=6;case 6:return[2]}}))}))})),[4,Promise.all(i)];case 1:return u.sent(),[2]}}))},a=0,i.label=1;case 1:return a<d.length?[5,e(a)]:[3,4];case 2:i.sent(),i.label=3;case 3:return a++,[3,1];case 4:return[2]}}))}))}()];case 1:return f.sent(),[2]}}))}))}},function(e,t){e.exports=require("uuid")},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function i(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0);t.default=function(e){return n(void 0,void 0,void 0,(function(){var t,r;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),[4,o.generateTestResolversData()];case 1:return t=n.sent(),[4,o.writeTestResolversDataToDB(t,e)];case 2:return n.sent(),[4,o.resolverTests(t,e)];case 3:return n.sent(),[2,o.errorMessages];case 4:return r=n.sent(),console.log("Test resolvers error",{meta:r.stack}),[3,5];case 5:return[2]}}))}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryTests=void 0;var n=r(0);t.getQueryTests=function(e){var t=e.users[0],r=e.documents,s=e.documentMembers,o=e.annotations,a=e.annotationMembers,i=e.mentions,u=e.annotations[0].createdAt-1e5;return[{resolver:"Query.user",calls:[{params:t.id,ensureNotNull:!0,test:function(e,r,s){n.compareResult(t,e,r,s)}},{params:"9999",ensureNotNull:!1,test:function(e,t,r){n.assert(e,null,t,r)}}]},{resolver:"Query.userWithEmail",calls:[{params:t.email,ensureNotNull:!0,test:function(e,r,s){n.compareResult(t,e,r,s)}},{params:"no-replay@pdftron.com",ensureNotNull:!1,test:function(e,t,r){n.assert(e,null,t,r)}}]},{resolver:"Query.annotations",calls:[{params:{ids:[o[0].id,o[1].id]},ensureNotNull:!0,test:function(e,t,r){var s=o.slice(0,2);n.compareResult(s,e,t,r)}},{params:{ids:["9999"]},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}},{params:{documentId:r[0].id},ensureNotNull:!0,test:function(e,t,s){var a=o.filter((function(e){return e.documentId===r[0].id}));n.compareResult(a,e,t,s)}},{params:{documentId:"9999"},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}},{params:{documentId:r[0].id,filters:{limit:5,orderBy:"updatedAt",orderDirection:"DESC"}},ensureNotNull:!0,test:function(e,t,s){var a=o.filter((function(e){return e.documentId===r[0].id}));a.sort((function(e,t){return t.updatedAt-e.updatedAt}));var i=a.splice(0,5);n.compareResult(i,e,t,s)}}]},{resolver:"Query.documents",calls:[{params:{ids:[r[0].id,r[1].id]},ensureNotNull:!0,test:function(e,t,s){var o=r.slice(0,2);n.compareResult(o,e,t,s)}},{params:{ids:["9999"]},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}},{params:{userId:t.id,filters:{limit:5,orderBy:"updatedAt",orderDirection:"DESC"}},ensureNotNull:!0,test:function(e,o,a){var i=[];s.forEach((function(e){e.userId===t.id&&i.push(r.find((function(t){return t.id===e.documentId})))})),i.sort((function(e,t){return t.updatedAt-e.updatedAt}));var u=i.splice(0,5);n.compareResult(u,e,o,a)}},{params:{userId:t.id},ensureNotNull:!0,test:function(e,o,a){var i=[];s.forEach((function(e){e.userId===t.id&&i.push(r.find((function(t){return t.id===e.documentId})))})),n.compareResult(i,e,o,a)}},{params:{userId:"9999"},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}}]},{resolver:"Query.annotationMembers",calls:[{params:{ids:[a[0].id,a[1].id]},ensureNotNull:!0,test:function(e,t,r){var s=a.slice(0,2);n.compareResult(s,e,t,r)}},{params:{ids:["9999"]},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}},{params:{userId:t.id},ensureNotNull:!0,test:function(e,r,s){var o=a.filter((function(e){return e.userId===t.id}));n.compareResult(o,e,r,s)}},{params:{userId:t.id,filters:{limit:5,orderBy:"updatedAt",orderDirection:"DESC"}},ensureNotNull:!0,test:function(e,r,s){var o=a.filter((function(e){return e.userId===t.id}));o.sort((function(e,t){return t.updatedAt-e.updatedAt}));var i=o.splice(0,5);n.assert(i.length,e.length,r,s)}},{params:{userId:"9999"},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}},{params:{annotationId:o[0].id},ensureNotNull:!0,test:function(e,t,r){var s=a.filter((function(e){return e.annotationId===o[0].id}));n.compareResult(s,e,t,r)}},{params:{annotationId:"9999"},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}}]},{resolver:"Query.documentMembers",calls:[{params:{ids:[s[0].id,s[1].id]},ensureNotNull:!0,test:function(e,t,r){var o=s.slice(0,2);n.compareResult(o,e,t,r)}},{params:{ids:["9999"]},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}},{params:{userId:t.id},ensureNotNull:!0,test:function(e,r,o){var a=s.filter((function(e){return e.userId===t.id}));n.compareResult(a,e,r,o)}},{params:{userId:t.id,filters:{limit:5,orderBy:"updatedAt",orderDirection:"DESC"}},ensureNotNull:!0,test:function(e,r,o){var a=s.filter((function(e){return e.userId===t.id}));a.sort((function(e,t){return t.updatedAt-e.updatedAt}));var i=a.splice(0,5);n.assert(i.length,e.length,r,o)}},{params:{userId:"9999"},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}},{params:{documentId:r[0].id},ensureNotNull:!0,test:function(e,t,o){var a=s.filter((function(e){return e.documentId===r[0].id}));n.compareResult(a,e,t,o)}},{params:{documentId:"9999"},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}}]},{resolver:"Query.mentions",calls:[{params:{ids:[i[0].id,i[1].id]},ensureNotNull:!0,test:function(e,t,r){var s=i.slice(0,2);n.compareResult(s,e,t,r)}},{params:{ids:["9999"]},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}},{params:{userId:t.id},ensureNotNull:!0,test:function(e,r,s){var o=i.filter((function(e){return e.userId===t.id}));n.compareResult(o,e,r,s)}},{params:{userId:t.id,filters:{limit:5,orderBy:"updatedAt",orderDirection:"DESC"}},ensureNotNull:!0,test:function(e,r,s){var o=i.filter((function(e){return e.userId===t.id}));o.sort((function(e,t){return t.updatedAt-e.updatedAt}));var a=o.splice(0,5);n.assert(a.length,e.length,r,s)}},{params:{userId:"9999"},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}},{params:{annotationId:o[0].id},ensureNotNull:!0,test:function(e,t,r){var s=i.filter((function(e){return e.annotationId===o[0].id}));n.compareResult(s,e,t,r)}},{params:{annotationId:"9999"},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}},{params:{documentId:r[0].id},ensureNotNull:!0,test:function(e,t,s){var o=i.filter((function(e){return e.documentId===r[0].id}));n.compareResult(o,e,t,s)}},{params:{documentId:"9999"},ensureNotNull:!0,test:function(e,t,r){n.assert(e,[],t,r)}}]},{resolver:"Query.annotationCount",calls:[{params:{since:u,documentId:r[0].id},ensureNotNull:!0,test:function(e,t,s){var a=o.filter((function(e){return e.createdAt>u&&e.documentId===r[0].id}));n.assert(e,a.length,t,s)}},{params:{since:Date.now(),documentId:r[0].id},ensureNotNull:!0,test:function(e,t,s){var a=o.filter((function(e){return e.createdAt>Date.now()&&e.documentId===r[0].id}));n.assert(e,a.length,t,s)}},{params:{since:Date.now(),documentId:"9999"},ensureNotNull:!0,test:function(e,t,r){n.assert(e,0,t,r)}}]},{resolver:"Query.annotationMemberCount",calls:[{params:{userId:t.id,documentId:r[0].id,since:u},ensureNotNull:!0,test:function(e,s,o){var i=a.filter((function(e){return e.userId===t.id&&e.documentId===r[0].id&&e.createdAt>u}));n.assert(e,i.length,s,o)}},{params:{userId:t.id,documentId:r[0].id,since:Date.now()},ensureNotNull:!0,test:function(e,s,o){var i=a.filter((function(e){return e.userId===t.id&&e.documentId===r[0].id&&e.createdAt>Date.now()}));n.assert(e,i.length,s,o)}},{params:{userId:t.id,documentId:"9999",since:Date.now()},ensureNotNull:!0,test:function(e,t,r){n.assert(e,0,t,r)}},{params:{userId:"9999",documentId:r[0].id,since:Date.now()},ensureNotNull:!0,test:function(e,t,r){n.assert(e,0,t,r)}}]}]}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getMutationTests=void 0;var s=r(0),o=r(1);t.getMutationTests=function(e){var t=e.users,r=e.documents,a=e.annotations,i=o.v4(),u=o.v4(),c=o.v4(),l=o.v4(),d=o.v4(),f=o.v4(),p=o.v4(),m={id:i,type:"STANDARD",userName:"test",email:"janedoe@pdftron.com",createdAt:Date.now(),updatedAt:Date.now()},v={id:u,xfdf:"abc",authorId:t[1].id,documentId:r[1].id,pageNumber:1,createdAt:Date.now(),updatedAt:Date.now(),inReplyTo:null},h=n(n({},v),{id:c,authorId:null}),b={id:l,authorId:t[1].id,createdAt:Date.now(),isPublic:!0,name:"webviewer-demo",updatedAt:Date.now()},y={id:d,userId:i,documentId:r[1].id,lastRead:Date.now(),createdAt:Date.now(),updatedAt:Date.now()},g={id:f,userId:i,documentId:r[1].id,annotationId:a[1].id,lastRead:Date.now(),createdAt:Date.now(),annotationCreatedAt:Date.now(),updatedAt:Date.now()},N={id:p,userId:i,documentId:r[1].id,annotationId:a[1].id,createdAt:Date.now(),updatedAt:Date.now()};return[{resolver:"Mutation.addUser",calls:[{params:m,ensureNotNull:!0,test:function(e,t,r){s.compareResult(m,e,t,r)}}]},{resolver:"Mutation.addAnnotation",calls:[{params:v,ensureNotNull:!0,test:function(e,t,r){s.compareResult(v,e,t,r)}},{params:h,ensureNotNull:!0,test:function(e,t,r){s.compareResult(h,e,t,r)}}]},{resolver:"Mutation.editAnnotation",calls:[{params:[v.id,{xfdf:"new-xfdf",pageNumber:2,updatedAt:1596215197877}],ensureNotNull:!0,test:function(e,t,r){s.assert(e.id,v.id,t,r)}}]},{resolver:"Mutation.deleteAnnotation",calls:[{params:v.id,ensureNotNull:!0,test:function(e,t,r){s.assert(e.successful,!0,t,r)}}]},{resolver:"Mutation.addDocument",calls:[{params:b,ensureNotNull:!0,test:function(e,t,r){s.compareResult(b,e,t,r)}}]},{resolver:"Mutation.editDocument",calls:[{params:[b.id,{isPublic:!1,name:"webviewer",updatedAt:1596215197877}],ensureNotNull:!0,test:function(e,t,r){s.assert(e.id,b.id,t,r)}}]},{resolver:"Mutation.deleteDocument",calls:[{params:b.id,ensureNotNull:!0,test:function(e,t,r){s.assert(e.successful,!0,t,r)}}]},{resolver:"Mutation.addDocumentMember",calls:[{params:y,ensureNotNull:!0,test:function(e,t,r){s.compareResult(y,e,t,r)}}]},{resolver:"Mutation.editDocumentMember",calls:[{params:[y.id,{lastRead:1596215197877,updatedAt:1596215197877}],ensureNotNull:!0,test:function(e,t,r){s.assert(e.id,y.id,t,r)}}]},{resolver:"Mutation.deleteDocumentMember",calls:[{params:y.id,ensureNotNull:!0,test:function(e,t,r){s.assert(e.successful,!0,t,r)}}]},{resolver:"Mutation.addAnnotationMember",calls:[{params:g,ensureNotNull:!0,test:function(e,t,r){s.compareResult(g,e,t,r)}}]},{resolver:"Mutation.editAnnotationMember",calls:[{params:[g.id,{lastRead:1596215197877,updatedAt:1596215197877}],ensureNotNull:!0,test:function(e,t,r){s.assert(e.id,g.id,t,r)}}]},{resolver:"Mutation.deleteAnnotationMember",calls:[{params:g.id,ensureNotNull:!0,test:function(e,t,r){s.assert(e.successful,!0,t,r)}}]},{resolver:"Mutation.addMention",calls:[{params:N,ensureNotNull:!0,test:function(e,t,r){s.compareResult(N,e,t,r)}}]},{resolver:"Mutation.editMention",calls:[{params:[N.id,{readBeforeMention:!0,updatedAt:1596215197877}],ensureNotNull:!0,test:function(e,t,r){s.assert(e.id,N.id,t,r),s.assert(e.updatedAt,1596215197877,t,r)}}]},{resolver:"Mutation.deleteMention",calls:[{params:N.id,ensureNotNull:!0,test:function(e,t,r){s.assert(e.successful,!0,t,r)}}]}]}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function i(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),i=o(r(7)),u=function(){function e(e){var t=e.xfdfString;this.xfdfString=t,this.data={users:[],annotations:[],documents:[],annotationMembers:[],documentMembers:[],mentions:[]}}return e.prototype.createUser=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return s(this,(function(s){switch(s.label){case 0:t=0,s.label=1;case 1:return t<e?[4,a.generateId()]:[3,4];case 2:r=s.sent(),n={id:r,userName:"test",email:r+"@pdftron.com",type:"STANDARD",createdAt:this.getTimeStamp(),updatedAt:this.getTimeStamp()},this.data.users.push(n),s.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.createDocument=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o;return s(this,(function(s){switch(s.label){case 0:r=0,s.label=1;case 1:return r<e?[4,a.generateId()]:[3,4];case 2:n=s.sent(),o={id:n,authorId:t,isPublic:!0,name:"test.pdf",createdAt:this.getTimeStamp(),updatedAt:this.getTimeStamp()},this.data.documents.push(o),s.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},e.prototype.createDocumentMember=function(e,t){return n(this,void 0,void 0,(function(){var r,n;return s(this,(function(s){switch(s.label){case 0:return[4,a.generateId()];case 1:return r=s.sent(),n={id:r,userId:e,documentId:t,lastRead:this.getTimeStamp(),createdAt:this.getTimeStamp(),updatedAt:this.getTimeStamp()},this.data.documentMembers.push(n),[2]}}))}))},e.prototype.createDocumentForAllUser=function(e){return n(this,void 0,void 0,(function(){var t=this;return s(this,(function(r){switch(r.label){case 0:return[4,Promise.all(this.data.users.map((function(r){return n(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.createDocument(e,r.id)];case 1:return t.sent(),[2]}}))}))})))];case 1:return r.sent(),[2]}}))}))},e.prototype.joinAllUserToAllDocument=function(){return n(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return[4,Promise.all(this.data.users.map((function(t){return n(e,void 0,void 0,(function(){var e=this;return s(this,(function(r){switch(r.label){case 0:return[4,Promise.all(this.data.documents.map((function(r){return n(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.createDocumentMember(t.id,r.id)];case 1:return e.sent(),[2]}}))}))})))];case 1:return r.sent(),[2]}}))}))})))];case 1:return t.sent(),[2]}}))}))},e.prototype.createAnnotation=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o,i;return s(this,(function(s){switch(s.label){case 0:n=0,s.label=1;case 1:return n<e?[4,a.generateId()]:[3,6];case 2:return o=s.sent(),i={id:o,xfdf:this.xfdfString,authorId:r,documentId:t,pageNumber:0,createdAt:this.getTimeStamp(),updatedAt:this.getTimeStamp(),inReplyTo:null},this.data.annotations.push(i),[4,this.createAnnotationMember(o,t,r)];case 3:return s.sent(),[4,this.createMention(o,t,r)];case 4:s.sent(),s.label=5;case 5:return n++,[3,1];case 6:return[2]}}))}))},e.prototype.createAnnotationMember=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o;return s(this,(function(s){switch(s.label){case 0:return o={},[4,a.generateId()];case 1:return o.id=s.sent(),o.userId=r,o.documentId=t,o.annotationId=e,o.lastRead=this.getTimeStamp(),o.createdAt=this.getTimeStamp(),o.updatedAt=this.getTimeStamp(),o.annotationCreatedAt=Date.now(),n=o,this.data.annotationMembers.push(n),[2]}}))}))},e.prototype.createMention=function(e,t,r){return n(this,void 0,void 0,(function(){var n,o;return s(this,(function(s){switch(s.label){case 0:return o={},[4,a.generateId()];case 1:return o.id=s.sent(),o.userId=r,o.documentId=t,o.annotationId=e,o.readBeforeMention=null,o.createdAt=this.getTimeStamp(),o.updatedAt=this.getTimeStamp(),n=o,this.data.mentions.push(n),[2]}}))}))},e.prototype.createAnnotationForAllUser=function(e){return n(this,void 0,void 0,(function(){var t=this;return s(this,(function(r){switch(r.label){case 0:return[4,Promise.all(this.data.users.map((function(r){return n(t,void 0,void 0,(function(){var t=this;return s(this,(function(o){switch(o.label){case 0:return[4,Promise.all(this.data.documents.map((function(o){return n(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.createAnnotation(e,o.id,r.id)];case 1:return t.sent(),[2]}}))}))})))];case 1:return o.sent(),[2]}}))}))})))];case 1:return r.sent(),[2]}}))}))},e.prototype.export=function(){var e=JSON.stringify(this.data);return new Promise((function(t,r){i.default.writeFile("./src/testResolvers/testResolversData.json",e,(function(e){e&&r(e),console.log("Generated test resolvers data > testResolversData.json"),t()}))}))},e.prototype.reset=function(){this.data={users:[],annotations:[],documents:[],annotationMembers:[],documentMembers:[],mentions:[]}},e.prototype.getTimeStamp=function(){return Date.now()+this.getRandomInt(1,100)},e.prototype.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},e}();t.default=u},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function i(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.generateId=t.setGenerator=void 0;var o=r(1),a=function(){return o.v4()};t.setGenerator=function(e){a=e};t.generateId=function(){return n(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,a()];case 1:return[2,e.sent()]}}))}))}},function(e,t){e.exports=require("fs")}]).default}));